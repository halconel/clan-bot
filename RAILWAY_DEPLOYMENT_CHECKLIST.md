# Railway Deployment Checklist

## ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

- [x] –û–±–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ pyproject.toml (aiogram 3.24.0)
- [x] –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω uv.lock —Ñ–∞–π–ª
- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω .dockerignore (–≤–∫–ª—é—á–µ–Ω—ã alembic —Ñ–∞–π–ª—ã)
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è RAILWAY_SETUP.md
- [x] –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –∏ –∑–∞–ø—É—à–µ–Ω—ã –≤ GitHub

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –¥–µ–ø–ª–æ—è

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Railway

1. –û—Ç–∫—Ä–æ–π—Ç–µ [railway.app](https://railway.app) –∏ –≤–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ GitHub
2. –ù–∞–∂–º–∏—Ç–µ **New Project** ‚Üí **Deploy from GitHub repo**
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `halconel/clan-bot`
4. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç Dockerfile –∏ –Ω–∞—á–Ω–µ—Ç —Å–±–æ—Ä–∫—É

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ PostgreSQL

1. –í –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞–∂–º–∏—Ç–µ **New** ‚Üí **Database** ‚Üí **Add PostgreSQL**
2. Railway —Å–æ–∑–¥–∞—Å—Ç PostgreSQL —Å–µ—Ä–≤–∏—Å –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é DATABASE_URL
3. **–í–∞–∂–Ω–æ**: –ù—É–∂–Ω–æ –±—É–¥–µ—Ç –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç DATABASE_URL (—Å–º. –Ω–∏–∂–µ)

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Å–µ—Ä–≤–∏—Å –±–æ—Ç–∞ ‚Üí **Variables** –∏ –¥–æ–±–∞–≤—å—Ç–µ:

```bash
BOT_TOKEN=8399686969:AAHdRt9Fz0Wx1T0Cmd-XFQuZve9nU6JeBRQ
LEADER_TELEGRAM_ID=310711996
SCREENSHOTS_DIR=data/screenshots
TEMP_STORAGE_FILE=data/pending.json
LOG_LEVEL=INFO
LOG_FILE=bot.log
```

**–ò—Å–ø—Ä–∞–≤—å—Ç–µ DATABASE_URL:**
- –ù–∞–π–¥–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é DATABASE_URL
- –ò–∑–º–µ–Ω–∏—Ç–µ –ø—Ä–µ—Ñ–∏–∫—Å `postgresql://` –Ω–∞ `postgresql+asyncpg://`
- –ü—Ä–∏–º–µ—Ä: `postgresql+asyncpg://postgres:pass@host.railway.app:5432/railway`

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è

1. Settings ‚Üí **Source** ‚Üí Deploy Branch: `main`
2. –í–∫–ª—é—á–∏—Ç–µ **Auto-Deploy**

### 5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Volume –¥–ª—è –¥–∞–Ω–Ω—ã—Ö

1. Settings ‚Üí **Volumes** ‚Üí **New Volume**
2. Mount Path: `/app/data`

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ø–ª–æ—è

1. Deployments ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π ‚Üí **View Logs**
2. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏–π:
   ```
   Loading settings...
   Initializing database...
   Database tables created/verified
   Initializing bot...
   Starting bot polling...
   ```

### 7. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Telegram

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞: `@ComradeClanBot`
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ `/register` - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–ª–æ—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
4. –û—Ç –∞–¥–º–∏–Ω–∞ (ID: 310711996): `/pending` - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞—è–≤–æ–∫
5. –û–¥–æ–±—Ä–∏—Ç–µ –∑–∞—è–≤–∫—É - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∏–≥—Ä–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ë–î

### 8. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–æ—Ç–∞:**

1. Railway Dashboard ‚Üí —Å–µ—Ä–≤–∏—Å –±–æ—Ç–∞ ‚Üí Settings
2. **Pause Service**

**–ü—Ä–∏—á–∏–Ω–∞**: –ë–æ—Ç –µ—â–µ –Ω–µ –∑–∞—â–∏—â–µ–Ω –æ—Ç –∞—Ç–∞–∫ (–Ω–µ—Ç –∫–∞–ø—á–∏, –Ω–µ—Ç rate limiting)

## üîç Troubleshooting

### –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ:
- "Bot token is invalid" ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ BOT_TOKEN
- "Database connection failed" ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç DATABASE_URL (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `postgresql+asyncpg://`)
- "No module named 'aiogram'" ‚Üí –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ (Settings ‚Üí Redeploy)

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–µ—Ä–≤–∏—Å –≤ —Å—Ç–∞—Ç—É—Å–µ "Active"
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "Starting bot polling..."
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ BOT_TOKEN –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π

## üìù –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ—Ç–∞
- [ ] –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é –≤–µ—Ç–∫—É –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞–ø—á–∏
- [ ] –†–µ—Å–µ—Ä—á: "–ö–∞–∫ –ø–æ–≤—ã—Å–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å Telegram –±–æ—Ç–æ–≤"
- [ ] –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç –¥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞—â–∏—Ç—ã

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [docs/RAILWAY_SETUP.md](docs/RAILWAY_SETUP.md)
